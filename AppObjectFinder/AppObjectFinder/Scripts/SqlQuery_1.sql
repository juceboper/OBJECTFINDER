DECLARE @CurrentMigration [nvarchar](max)

IF object_id('[dbo].[__MigrationHistory]') IS NOT NULL
    SELECT @CurrentMigration =
        (SELECT TOP (1) 
        [Project1].[MigrationId] AS [MigrationId]
        FROM ( SELECT 
        [Extent1].[MigrationId] AS [MigrationId]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
        WHERE [Extent1].[ContextKey] = N'AppObjectFinder.Models.ApplicationDbContext'
        )  AS [Project1]
        ORDER BY [Project1].[MigrationId] DESC)

IF @CurrentMigration IS NULL
    SET @CurrentMigration = '0'

IF @CurrentMigration < '201602280103445_InitialCreate'
BEGIN
    CREATE TABLE [dbo].[AspNetRoles] (
        [Id] [nvarchar](128) NOT NULL,
        [Name] [nvarchar](256) NOT NULL,
        CONSTRAINT [PK_dbo.AspNetRoles] PRIMARY KEY ([Id])
    )
    CREATE UNIQUE INDEX [RoleNameIndex] ON [dbo].[AspNetRoles]([Name])
    CREATE TABLE [dbo].[AspNetUserRoles] (
        [UserId] [nvarchar](128) NOT NULL,
        [RoleId] [nvarchar](128) NOT NULL,
        CONSTRAINT [PK_dbo.AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId])
    )
    CREATE INDEX [IX_UserId] ON [dbo].[AspNetUserRoles]([UserId])
    CREATE INDEX [IX_RoleId] ON [dbo].[AspNetUserRoles]([RoleId])
    CREATE TABLE [dbo].[AspNetUsers] (
        [Id] [nvarchar](128) NOT NULL,
        [Email] [nvarchar](256),
        [EmailConfirmed] [bit] NOT NULL,
        [PasswordHash] [nvarchar](max),
        [SecurityStamp] [nvarchar](max),
        [PhoneNumber] [nvarchar](max),
        [PhoneNumberConfirmed] [bit] NOT NULL,
        [TwoFactorEnabled] [bit] NOT NULL,
        [LockoutEndDateUtc] [datetime],
        [LockoutEnabled] [bit] NOT NULL,
        [AccessFailedCount] [int] NOT NULL,
        [UserName] [nvarchar](256) NOT NULL,
        CONSTRAINT [PK_dbo.AspNetUsers] PRIMARY KEY ([Id])
    )
    CREATE UNIQUE INDEX [UserNameIndex] ON [dbo].[AspNetUsers]([UserName])
    CREATE TABLE [dbo].[AspNetUserClaims] (
        [Id] [int] NOT NULL IDENTITY,
        [UserId] [nvarchar](128) NOT NULL,
        [ClaimType] [nvarchar](max),
        [ClaimValue] [nvarchar](max),
        CONSTRAINT [PK_dbo.AspNetUserClaims] PRIMARY KEY ([Id])
    )
    CREATE INDEX [IX_UserId] ON [dbo].[AspNetUserClaims]([UserId])
    CREATE TABLE [dbo].[AspNetUserLogins] (
        [LoginProvider] [nvarchar](128) NOT NULL,
        [ProviderKey] [nvarchar](128) NOT NULL,
        [UserId] [nvarchar](128) NOT NULL,
        CONSTRAINT [PK_dbo.AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey], [UserId])
    )
    CREATE INDEX [IX_UserId] ON [dbo].[AspNetUserLogins]([UserId])
    ALTER TABLE [dbo].[AspNetUserRoles] ADD CONSTRAINT [FK_dbo.AspNetUserRoles_dbo.AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [dbo].[AspNetRoles] ([Id]) ON DELETE CASCADE
    ALTER TABLE [dbo].[AspNetUserRoles] ADD CONSTRAINT [FK_dbo.AspNetUserRoles_dbo.AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[AspNetUsers] ([Id]) ON DELETE CASCADE
    ALTER TABLE [dbo].[AspNetUserClaims] ADD CONSTRAINT [FK_dbo.AspNetUserClaims_dbo.AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[AspNetUsers] ([Id]) ON DELETE CASCADE
    ALTER TABLE [dbo].[AspNetUserLogins] ADD CONSTRAINT [FK_dbo.AspNetUserLogins_dbo.AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[AspNetUsers] ([Id]) ON DELETE CASCADE
    CREATE TABLE [dbo].[__MigrationHistory] (
        [MigrationId] [nvarchar](150) NOT NULL,
        [ContextKey] [nvarchar](300) NOT NULL,
        [Model] [varbinary](max) NOT NULL,
        [ProductVersion] [nvarchar](32) NOT NULL,
        CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY ([MigrationId], [ContextKey])
    )
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'201602280103445_InitialCreate', N'AppObjectFinder.Models.ApplicationDbContext',  0x1F8B0800000000000400DD5C5B6FE336167E5F60FF83A0A7DD456AE5D219CC06768BD48977834E2E18678A7D1BD012ED7047A254894A1314FD65FBB03FA97FA18712254BBCE8622BB6531428C622F99DC3C38FE4E1E1617EFFDFFFC7DF3F07BEF584E3848474629F8C8E6D0B5337F4085D4DEC942DBFF9607FFFDD5FFF32BEF28267EBA7A2DE19AF072D6932B11F198BCE1D27711F7180925140DC384CC2251BB961E0202F744E8F8FFFE99C9C3818206CC0B2ACF1A7943212E0EC07FC9C86D4C5114B917F137AD84FC477289967A8D62D0A701221174FEC8B28BA5BFC17BB6C46A887E351DEC2B62E7C82409B39F697B685280D1962A0EBF9E704CF591CD2D53C820FC87F788930D45B223FC1A20FE7EBEA5DBB737CCABBE3AC1B16506E9AB030E809787226ECE3C8CD37B2B25DDA0F2C780596662FBCD7991527F6B587B34F9F421F0C200B3C9FFA31AF3CB16F4A111749748BD9A86838CA216731C0FD12C65F4755C423AB73BBA3924FA7A363FEDF91354D7D96C6784271CA62E41F59F7E9C227EE8FF8E521FC8AE9E4EC64B13CFBF0EE3DF2CEDE7F8BCFDE557B0A7D857AB50FF0E93E0E231C836E7859F6DFB69C7A3B476E5836ABB4C9AD025C82A9615B37E8F923A62BF60893E6F4836DCDC833F68A2F825C9F298199048D589CC2CFDBD4F7D1C2C765B9D32893FFBF41EAE9BBF78348BD454F64950DBD241F264E0CF3EA13F6B3D2E49144F9F4AA8DF717516D168701FF5DE7575EFA651EA6B1CB3B131AAB3CA07885595DBBB1B3266F274A73A8E1695DA01E3EB5B9A62ABDB555798736990985885DCF8642DFD795DB9971B00BC1E065D4E21669229C7EC31A49084796546F4DA193AE14A2D0B53FF38A781520E20FB0247690021EC992C4012E7BF943080444B4B7CEF728496045F0FE8D92C706D5E19F03A83EC76E1A0351E70C05D1AB4BBB7F0C29BE4D8305E7FFEE640D36340FBF8433E4B230BEA2BCD5D6781F43F76B98B22BEA5D22863F33B700E43F1F48D01D6010752E5C1727C90CC88CBD69080E7701784DD9D9696F38BE48EDDB2599FA88047A9F445A4EBF1455D77E89BE86E29B18AAE9FC9326553F862B42BBA95A5435AB9AD768555554EBAB2A07EBA6A9A8695634ABD0AA675E6B308F2F1BA1E15DBE0CF6F07DBEED366FD35A5031E31C5648FC2F4C710CCB98778F18C3315D8F409775631FCE42367C5CE8ABEF4D99A49F909F0E2D6AA3D9902D02C3CF860CF6F06743A6267C7E221EF74A3A1C848ACA00DFA9BEFE8CD53EE724CD763D1D6ADDDCB5F0DDAC01A6E9729124A14BB259A009818900465D7FF0E1ACF66846DE1B3922021D03A213BEE5C117E89B2D93EA8E5E621F336C5DB87988708A121779AA19A1435E0FC58A1D55A3D83A325257EE1F8A4C603A8E7923C40F4109CC5442993A2D08754984FC562B492D3B6E61BCEFA50CB9E41247987281AD96E8225C1F08E10A9472A44169B3D0D8A930AE998806AFD534E66D2EEC7ADC95F8C44E38D9E23B1B7829FCB7572166B3C57640CE66937451C018D4DB0741C559A52B01E483CBA111543A3119082A5CAA9D10B46EB13D10B46E923747D0FC88DA75FCA5F3EAA1D1B37E50DEFDB6DE68AE3D70B3668F03A366EE7B421B062D70ACD2F372C10BF133D31CCE404F713E4B84AB2B538483CF31AB876CD6FEAED60F759A4164123501AE89D6022AAE0315206542F550AE88E5356A27BC881EB045DCAD1156ACFD126C85032A76F55AB452D17C792A93B3D3E9A3EC59C90685E49D0E0B151C0D21E4C5ABDEF10E4631C56555C374F185FB78C3958E89C16830508BE76A3052D199C1AD5450B3DD4A3A87AC8F4BB6959524F7C960A5A233835B4970B4DD481AA7A0875BB09589EA5BF84093AD887494BB4D593676F28C29F161EC1852ABC637288A085D5552ADC4176B9EE7594DBF99F74F3E0A720CC74D343948A5B6A52416C66885A552100D9ACE489CB04BC4D002F138CFD40B946ADABDD5B0FC1722ABDBA73A88C53E50D4E6FF2EA9A7BBC4AFEDB7AA43227066D0CB807B3559285DC3017D738BA7BF211FC59AE8FD34F4D3809A9D2C73EBFC0EAFDA3EFFA2228C1D497FC589522CA6B8BA75F3771A1C75620C3850A51FB3F96099214C262FBCD0AAD14D9EA919A5085455514CC1ABBD0D9EC9A1E93D60B2BFD87FBC5A115E677E8924952A80F8D413A392E7A08055CABAA3D65351AA98F592EE8852BE4915522AEAA16535ABA4A664B560233C8345F535BA4B50F348AAE86A6977644D4649155A53BC01B64667B9AC3BAA26E9A40AAC29EE8EBDCE409117D203DEC18CA798ADB6B0FCB0BBDD1E66C0789D5571982DB072A75F05AA7CEE89256EED1530F1FD2019653CF16DC5A83CCEB11DA30C18E615A876235E5F801AAFF1CD98B56BEEDA22DF74CD6FC6EBC7DB57658772E893AB94D2CBC39F74C81B8B0357FB231BE5049657B1ADC28CB0C1BF240C07235E6134FFD99FFA04F3E5BCA870832859E284E5A91DF6E9F1C9A9F446E770DECB3849E2F99A03ABE9D14C7DCC7690A5459F50EC3EA258CD99D8E24DC91A5409475FC32AF13CB17FCD5A9D67910DFEAFECF391759D7CA6E4E7140A1EE2145BBFA939A0C3E4D8371FB80EF4454477AB5EFFE74BDEF4C8BA8B61C69C5BC7922D3719E1FA3B895EDAE44DB7D066E3D7136F7742D59E246851A509B1F90B84056183BC3E28B4FC5B809EFFDE5735ED0B83AD1035AF0886C21BC484A657029B60195F0878F093652F04FA7556FF626013D58CAF0508ED0F26BF15E8BE0C152DF7B8D568CE45BB5892323BB7E65A6F9578B9EFBD4949C9DE6AA2AB69D73DE0B648ADDE80196F2C2B79B0DD5193743C18F63EA9FDEA99C687925CBC4EFBD86F4EF12ED3881BAE88FE54D9C30790EFA6C9DFD97F8EF0AEB9668AE51E78A265BF4CE003239BC8EADA7FBEEFAEC9660AF31E38D97A65F51E18D7F6B57FEE99699DB7D0BDE7E8AAE946863B195D2CB82D07370F9CC3097F110209728F327F3AA94FFA6A4A586D11B8AE62166ACE3693052B134791ABD46816DBAFAF62C36FECACA8D32CD690A3D9245BACFF8DB2459D66D986CCC77D640F6B730F7519DD2DEB585342D45BCA16AEF5A42539BDCD676DBC607F4BC9C18318A5367B0C77C46F27177810930C39757AE4FEAAD7BDB07756FEF222ECDF0959AD21F8DF61A4D8ADED9A659D6BBA0C8BCD5BD2A8A82245686E30431E6CA91731234BE43228E631E6ECED7716B7E3371D0BEC5DD3BB944529832EE360E1D7025EDC0968929F2538D7751EDF45D99F3119A20BA026E1B1F93BFA434A7CAFD47BA689091920B8772122BA7C2C198FECAE5E4AA4DB90760412E62B9DA2071C443E802577748E9EF026BA01FD3EE215725FD611401348FB40D4CD3EBE246815A3201118EBF6F01338EC05CFDFFD014B0FC04380540000 , N'6.1.3-40302')
END

